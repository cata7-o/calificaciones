<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Calificaciones</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1>Sistema de Calificaciones</h1>
            <div class="card">
                <div class="card__body">
                    <h2>Iniciar Sesión</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label class="form-label" for="username">Usuario</label>
                            <input type="text" id="username" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="password">Contraseña</label>
                            <input type="password" id="password" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Ingresar</button>
                    </form>
                    <p class="login-hint">Usuario: admin | Contraseña: admin</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="screen">
        <header class="app-header">
            <div class="container">
                <div class="header-content">
                    <h1>Sistema de Calificaciones</h1>
                    <div class="header-actions">
                        <span id="userDisplay" class="user-display"></span>
                        <button id="logoutBtn" class="btn btn--secondary btn--sm">Cerrar Sesión</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="subjects">Materias</button>
                <button class="tab-btn" data-tab="students">Estudiantes</button>
                <button class="tab-btn" data-tab="grades">Calificaciones</button>
            </div>

            <!-- Subjects Tab -->
            <div id="subjectsTab" class="tab-content active">
                <div class="section">
                    <h2>Agregar Materia</h2>
                    <div class="card">
                        <div class="card__body">
                            <form id="subjectForm" class="inline-form">
                                <input type="text" id="subjectName" class="form-control" placeholder="Nombre de la materia" required>
                                <button type="submit" class="btn btn--primary">Agregar</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Lista de Materias</h2>
                    <div id="subjectsList" class="items-list"></div>
                </div>
            </div>

            <!-- Students Tab -->
            <div id="studentsTab" class="tab-content">
                <div class="section">
                    <h2>Agregar Estudiante</h2>
                    <div class="card">
                        <div class="card__body">
                            <form id="studentForm" class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="studentName">Nombre del Estudiante</label>
                                    <input type="text" id="studentName" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="studentSubject">Materia</label>
                                    <select id="studentSubject" class="form-control" required>
                                        <option value="">Seleccionar materia</option>
                                    </select>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary">Agregar Estudiante</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Excel Import Section -->
                    <div class="card excel-import-card">
                        <div class="card__body">
                            <h3>Importar desde Excel</h3>
                            <p class="import-description">Carga estudiantes masivamente desde un archivo Excel (.xlsx o .xls)</p>
                            <div class="import-actions">
                                <input type="file" id="excelFileInput" accept=".xlsx,.xls" style="display: none;">
                                <button id="selectExcelBtn" class="btn btn--secondary">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="17 8 12 3 7 8"></polyline>
                                        <line x1="12" y1="3" x2="12" y2="15"></line>
                                    </svg>
                                    Cargar desde Excel
                                </button>
                                <span id="selectedFileName" class="selected-file-name"></span>
                            </div>
                            <div class="import-help">
                                <strong>Formato esperado:</strong>
                                <ul>
                                    <li>Columna 1: Nombre del Estudiante</li>
                                    <li>Columna 2: Materia</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Lista de Estudiantes</h2>
                    <div class="filter-section">
                        <select id="filterSubject" class="form-control">
                            <option value="">Todas las materias</option>
                        </select>
                    </div>
                    <div id="studentsList" class="items-list"></div>
                </div>
            </div>

            <!-- Grades Tab -->
            <div id="gradesTab" class="tab-content">
                <div class="section">
                    <h2>Asignar Calificación</h2>
                    <div class="card">
                        <div class="card__body">
                            <form id="gradeForm" class="form-grid">
                                <div class="form-group">
                                    <label class="form-label" for="gradeSubject">Materia</label>
                                    <select id="gradeSubject" class="form-control" required>
                                        <option value="">Seleccionar materia</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="gradeStudent">Estudiante</label>
                                    <select id="gradeStudent" class="form-control" required>
                                        <option value="">Seleccionar estudiante</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="gradeValue">Calificación (0-100)</label>
                                    <input type="number" id="gradeValue" class="form-control" min="0" max="100" required>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary">Asignar Calificación</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Calificaciones Registradas</h2>
                    <div id="gradesList" class="items-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Excel Import Preview Modal -->
    <div id="importPreviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Vista previa de importación</h2>
                <button class="modal-close" id="closePreviewModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="previewContent"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelImportBtn" class="btn btn--secondary">Cancelar</button>
                <button id="confirmImportBtn" class="btn btn--primary">Confirmar importación</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="alertMessage" class="alert hidden"></div>
    <script type="module" src="app.js"></script>
</body>
</html>